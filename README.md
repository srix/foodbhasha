# FoodBhasha

A multilingual Indian food glossary application available on [Web](https://foodbhasha.com) and Android.

## Project Structure

This project uses a unique dual-build architecture to support both high-performance SEO on the web and a smooth native app experience on Android.

### Key Directories

-   **`src/`** (Source Code)
    -   Contains the master codebase: `index.html`, `app.js`, `style.css`, and `data/`.
    -   **Always edit files here.** Do not edit files in `dist/` or `www/` directly.

-   **`dist/`** (Web / SEO Build)
    -   **Purpose**: Deployed to Netlify for the public website.
    -   **Mechanism**: Generated by `scripts/generate-static.js` (Static Site Generation).
    -   **Why?**: Creates 300+ physical HTML files (e.g., `/fish/pomfret/index.html`) so Google can index every item perfectly.
    -   **SEO Features**:
        -   **trailingSlash**: Enforced on all canonical URLs.
        -   **Rich Meta**: Includes item notes and regional names.
        -   **Pre-rendered Content**: Every item page includes full content for search engines.

-   **`dist-android/`** (Android / SPA Build)
    -   **Purpose**: Used by Capacitor to build the Android App.
    -   **Mechanism**: Generated by `npm run build:web`.
    -   **Why?**: Copies the source as a "Single Page Application". Does NOT have pre-rendered HTML files. This ensures the Android app feels fast and fluid (no page reloads on navigation).

-   **`android/`** (Native Project)
    -   **Purpose**: The generated Android Studio project.
    -   **Mechanism**: Managed by Capacitor (`npx cap sync`).
    -   **Usage**: Open in Android Studio to build the final APK/AAB or run on a real device.

## Scripts

|Command|Description|Output|
| :--- | :--- | :--- |
| `npm start` | Runs specific dev server (if configured) or generic node server. | `localhost:8080` |
| `npm run build` | **Web Deployment**. Generates static HTML pages + runs SEO Audit. | `dist/` |
| `npm run build:web` | **Android Prep**. Copies source files for Capacitor. | `dist-android/` |
| `npm run android:run`| Syncs `dist-android/` and runs the Android app on device/emulator. | Android App |

## Deployment

-   **Web**: Netlify automatically runs `npm run build` and publishes the `dist/` folder.
-   **Android**: You must run `npm run android:build` (or `android:run`) to sync changes to the native project.

## Testing Strategy
-   **`npm test`**: Runs Playwright tests against the **Dev Server** (`src/`). Checks for functionality, navigation, and fallback logic.
-   **`npm run audit`**: Runs the SEO Audit against the **Production Build** (`dist/`). Checks specifically for indexability (Titles, Descriptions, Canonical, Pre-rendered content).
-   **Important**: Always run `npm run build` (which runs `audit`) before committing `dist/` changes.

## Versioning

The project uses a **Manual Versioning** system controlled by a single file: `src/version.json`.

1.  **To Release a New Version**:
    *   Edit `src/version.json` and update the version (e.g., `1.20`).
    *   **Web**: Just commit and push. Netlify will rebuild, and the footer will show `v1.20`.
    *   **Android**: Run `npm run android:build`. This script (`scripts/bump_version.js`) will:
        *   Read `src/version.json`.
        *   Update `android/app/build.gradle` (VersionName = `1.20`, VersionCode auto-increments).
        *   Sync `package.json` to `1.20` (for ecosystem consistency).
        *   Update `src/index.html` footer to `v1.20`.

